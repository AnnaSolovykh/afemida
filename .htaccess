RewriteEngine On

# Single redirect rule to handle HTTP, non-www, and root path to HTTPS www with language
RewriteCond %{HTTP_HOST} !^www\. [NC,OR]
RewriteCond %{HTTPS} off [OR]
RewriteCond %{REQUEST_URI} ^/?$
RewriteRule ^(.*)$ https://www.afemida.com/en/ [L,R=301]

# Handle other paths - force HTTPS and www only
RewriteCond %{HTTP_HOST} !^www\. [NC,OR]
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://www.afemida.com/$1 [L,R=301]

# Clean up index.html
RewriteRule ^(en|ru)/index\.html$ /$1/ [R=301,L]

# <RequireAll>
#   Require all denied
# </RequireAll>
