RewriteEngine On

# Combine HTTP to HTTPS and non-www to www redirection into one step
RewriteCond %{HTTPS} off [OR]
RewriteCond %{HTTP_HOST} ^afemida.com$
RewriteRule ^ https://www.afemida.com%{REQUEST_URI} [L,R=301]

# Redirect root directly to the English version in one go
RewriteCond %{HTTP_HOST} ^www.afemida.com$
RewriteCond %{REQUEST_URI} ^/$
RewriteRule ^ https://www.afemida.com/en/ [L,R=301]

# Ensure that direct accesses to language-specific directories are via HTTPS
RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} ^/(en|ru)/
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Redirect old index.html to the new page
Redirect 301 /en/index.html https://www.afemida.com/en/
Redirect 301 /ru/index.html https://www.afemida.com/ru/


# <RequireAll>
#   Require all denied
# </RequireAll>